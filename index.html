<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Chatbot Altice - Ensanche Isabelita</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: url('https://i.ibb.co/fMh1jkq/ensanche-fondo.jpg') no-repeat center center fixed;
      background-size: cover;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
    #chat-container {
      width: 420px;
      max-width: 90%;
      height: 600px;
      background-color: rgba(255, 255, 255, 0.95);
      border-radius: 15px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }
    header {
      background-color: #002855;
      color: #fff;
      padding: 12px 20px;
      display: flex;
      align-items: center;
      gap: 12px;
      font-weight: bold;
      font-size: 1.2rem;
    }
    header img {
      height: 30px;
    }
    #messages {
      flex-grow: 1;
      padding: 15px;
      overflow-y: auto;
      background-color: #f4f4f4;
    }
    .message {
      margin-bottom: 12px;
      padding: 10px 14px;
      border-radius: 18px;
      max-width: 80%;
      font-size: 0.95rem;
      line-height: 1.3;
      word-wrap: break-word;
    }
    .user {
      background-color: #0052cc;
      color: white;
      align-self: flex-end;
      border-bottom-right-radius: 5px;
    }
    .bot {
      background-color: #e8e8e8;
      color: #000;
      align-self: flex-start;
      border-bottom-left-radius: 5px;
    }
    #input-area {
      padding: 10px;
      border-top: 1px solid #ccc;
      background: white;
      display: flex;
      flex-direction: column;
    }
    #options {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 8px;
    }
    .option-btn {
      background-color: #004aad;
      color: white;
      border: none;
      border-radius: 20px;
      padding: 6px 12px;
      cursor: pointer;
      font-size: 0.9rem;
    }
    .option-btn:hover {
      background-color: #003080;
    }
    #input {
      display: none;
    }
    iframe {
      width: 100%;
      height: 200px;
      border: none;
    }
  </style>
</head>
<body>
  <div id="chat-container">
    <header>
      <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/7/76/Altice_logo.svg/2560px-Altice_logo.svg.png" alt="Altice logo" />
      Chatbot Altice Isabelita
    </header>
    <div id="messages"></div>
    <iframe
      src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3762.7758264761883!2d-69.84802462562799!3d18.49243708260386!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8ea56155f022bd7d%3A0x7e88cfb12dd90ae0!2sEnsanche%20Isabelita!5e0!3m2!1ses!2sdo!4v1720206598371!5m2!1ses!2sdo"
      allowfullscreen=""
      loading="lazy"
      referrerpolicy="no-referrer-when-downgrade"
    ></iframe>
    <div id="input-area">
      <div id="options"></div>
    </div>
  </div>

  <script>
    const messages = document.getElementById('messages');
    const options = document.getElementById('options');

    function addMessage(text, sender = 'bot') {
      const msg = document.createElement('div');
      msg.className = `message ${sender}`;
      msg.textContent = text;
      messages.appendChild(msg);
      messages.scrollTop = messages.scrollHeight;
    }

    function showOptions(optionArray) {
      options.innerHTML = '';
      optionArray.forEach(opt => {
        const btn = document.createElement('button');
        btn.className = 'option-btn';
        btn.textContent = opt.label;
        btn.onclick = () => {
          addMessage(opt.label, 'user');
          handleOption(opt.value);
        };
        options.appendChild(btn);
      });
    }

    function handleOption(value) {
      switch (value) {
        case 'inicio':
          addMessage('Hola, soy el asistente virtual de Altice para el Ensanche Isabelita. ¿En qué puedo ayudarte hoy?');
          showOptions([
            { label: 'Problema con internet', value: 'internet' },
            { label: 'Problema con llamadas', value: 'llamadas' },
            { label: 'Horario de oficina', value: 'horario' },
            { label: 'Contactar soporte', value: 'soporte' },
            { label: 'Enviar ubicación', value: 'ubicacion' },
          ]);
          break;
        case 'internet':
          addMessage('¿Tu problema es lentitud o sin conexión?');
          showOptions([
            { label: 'Lentitud', value: 'lentitud' },
            { label: 'Sin conexión', value: 'sinconexion' },
            { label: 'Volver', value: 'inicio' }
          ]);
          break;
        case 'lentitud':
          addMessage('Reinicia tu router. Si el problema continúa, llama al 809-200-1000.');
          showOptions([{ label: 'Volver al inicio', value: 'inicio' }]);
          break;
        case 'sinconexion':
          addMessage('Verifica los cables. Si no funciona, contacta soporte Altice.');
          showOptions([{ label: 'Contactar soporte', value: 'soporte' }, { label: 'Volver', value: 'inicio' }]);
          break;
        case 'llamadas':
          addMessage('¿No puedes hacer llamadas o se cortan?');
          showOptions([
            { label: 'No puedo llamar', value: 'nocall' },
            { label: 'Se corta la llamada', value: 'cortes' },
            { label: 'Volver', value: 'inicio' }
          ]);
          break;
        case 'nocall':
          addMessage('Verifica que tengas señal y saldo. Contacta soporte si persiste.');
          showOptions([{ label: 'Volver al inicio', value: 'inicio' }]);
          break;
        case 'cortes':
          addMessage('Puede ser una falla de red. Contacta soporte Altice.');
          showOptions([{ label: 'Contactar soporte', value: 'soporte' }, { label: 'Volver', value: 'inicio' }]);
          break;
        case 'horario':
          addMessage('Altice Ensanche Isabelita abre de lunes a viernes, de 8:00 AM a 6:00 PM.');
          showOptions([{ label: 'Volver al inicio', value: 'inicio' }]);
          break;
        case 'soporte':
          addMessage('Puedes llamar al 809-200-1000 o visitar la oficina más cercana.');
          showOptions([{ label: 'Volver al inicio', value: 'inicio' }]);
          break;
        case 'ubicacion':
          addMessage('Por favor, comparte tu ubicación actual. (Simulado para fines demostrativos).');
          showOptions([{ label: 'Ubicación enviada ✅', value: 'ubicacion_ok' }]);
          break;
        case 'ubicacion_ok':
          addMessage('Gracias. Usaremos esta ubicación para revisar el problema.');
          showOptions([{ label: 'Volver al inicio', value: 'inicio' }]);
          break;
        default:
          addMessage('No entiendo esa opción.');
          showOptions([{ label: 'Volver al inicio', value: 'inicio' }]);
          break;
      }
    }

    // Iniciar conversación
    handleOption('inicio');
  </script>
</body>
</html>
